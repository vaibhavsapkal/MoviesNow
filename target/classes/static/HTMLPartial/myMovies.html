<div class="container">
	<div class="jumbotron">
		<div>
			<div>
				<button class="btn btn-info" role="button" data-toggle="modal"
					data-target="#addModal">Add Movie</button>
			</div>

			<div class="modal fade" id="addModal" role="dialog" tabindex="-1">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Add Movie</h4>

						</div>
						<div class="modal-body">
							<div class="input-group">
								<input ng-model="title" type="text" class="form-control"
									placeholder="Enter movie name"> <span
									class="input-group-btn">
									<button class="btn btn-default" type="button"
										ng-click="findMovie()">Search</button>
								</span>
							</div>
							<div ng-show="isMovieFound">
								<div class="thumbnail">
									<img ng-src="{{movie[0].img}}"
										style="width: 100%; height: 300px">
									<div class="caption">
										<div align=center>{{movie[0].Name | limitTo: 20
											}}{{movie[0].Name.length > 20 ? '...' : ''}}</div>
										<div>
											<p>
											<h4>Director : {{movie[0].director}}</h4>
											</p>
											<p>
											<h4>Actors : {{movie[0].actor}}</h4>
											</p>
											<p>
											<h4>Year: {{movie[0].year}}</h4>
											</p>
											<p>
											<h4>Rating : {{movie[0].rating}}</h4>
											</p>
										</div>
										<p>
											<button class="btn btn-info" role="button"
												ng-click="addMovie(movie[0])">Add</button>
											<button type="button" class="btn btn-default"
												data-dismiss="modal">Cancel</button>
										</p>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>

		</div>

		<div>
			<br>
		</div>

		<div ng-show="movies.length == 0">You don't have any movie
			added. Click above "Add Movie" button and start adding movies.</div>
		
		<div ng-show="movies.length != 0">
			<div class="row">
				<div class="col-md-4" ng-repeat="movie in movies">
					<div class="thumbnail">
						<img ng-src="{{movie.img}}" style="width: 100%; height: 400px">
						<div class="caption">
							<div align=center>{{movie.Name | limitTo: 20
								}}{{movie.Name.length > 20 ? '...' : ''}}</div>

							<div>
								<p>
								<h4>Director : {{movie.director}}</h4>
								</p>
								<p>
								<h4>Actors : {{movie.actor}}</h4>
								</p>
								<p>
								<h4>Year: {{movie.year}}</h4>
								</p>
								<p>
								<h4>Rating : {{movie.rating}}</h4>
								</p>
							</div>
							<p>
								<button class="btn btn-info" role="button" data-toggle="modal"
									data-target="#requestModal{{$index}}">Requests</button>

							</p>

							<div class="modal fade" id="requestModal{{$index}}" role="dialog"
								tabindex="-1">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal">&times;</button>
											<h4 class="modal-title">{{movie.Name}}</h4>
										</div>
										<div class="modal-body">
											<div class="row" ng-repeat="request in movie.requests">
												<div class="row" ng-hide="request.isDelcined">
													<div class="col-md-2"
														style="padding-left: 20px; padding-top: 8px;">
														<strong>{{request.borrower.name}}</strong>
													</div>
													<div class="col-md-7">
														<input type="text" ng-model="replyMessage"
															placeholder="Enter your message.." class="form-control">
													</div>
													<div class="col-md-3">
														<button type="button" class="btn btn-success"
															ng-click="accept(request,movie)"
															ng-hide="movie.isBorrowed">
															<span class="glyphicon glyphicon-ok"></span>
														</button>
														<button type="button" class="btn btn-danger"
															ng-click="deny(request)"
															ng-hide="movie.isBorrowed && request.isBorrowed">
															<span class="glyphicon glyphicon-remove"></span>
														</button>
														<button type="button" class="btn btn-warning"
															ng-show="movie.isBorrowed && request.isBorrowed">Ask
															For Return</button>
													</div>
												</div>
											</div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default"
												data-dismiss="modal">Close</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>